dependencies:
  pre:
    - curl -o $HOME/$GAE_SDK_NAME $GAE_SDK_LINK
    - unzip -q -d $HOME $HOME/$GAE_SDK_NAME

test:
  override:
    - phpunit --bootstrap qa-tests/autoload.php qa-tests

deployment:
  production:
    branch: master
    commands:
      - sudo apt-get install sshpass
      - echo $PROD_USERNAME@$PROD_HOSTNAME:$PROD_SSH_PORT
      - sshpass -p $PROD_PASSWORD rsync -az -vvv -r . $PROD_USERNAME@$PROD_HOSTNAME:$PROD_SSH_PORT/ci
  devserver:
    branch: develop
    commands:
      - $HOME/$GAE_PUSH_SCRIPT -A $LAPPRES_DEV_NAME update . --oauth2_refresh_token=$APPENGINE_TOKEN

